<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>회원가입</title>
</head>
<div th:replace="common/header::userHead"></div>
<body>

<div class="container mt-5">
    <div class="form-group">
        <label for="username">아이디</label>
        <input type="text"
               name="username" id="username" class="form-control" placeholder="" aria-describedby="helpId" autocomplete="off">
        <small id="helpId" class="text-muted">아이디를 입력하세요</small>
    </div>
    <div class="form-group">
        <label for="password">비밀번호</label>
        <input type="password" id="password" name="password" class="form-control"  aria-describedby="helpPw" >
        <small id="helpPw" class="text-muted">비밀번호를 입력하세요</small>
    </div>

    <div class="form-group">
        <button class="btn btn-primary btn-block">회원가입</button>
    </div>
</div>

<!-- data -->
<script>
    let signBtn = document.querySelector('.btn')
    let username = document.getElementById('username')
    let password = document.getElementById('password')
</script>

<!-- event -->
<script>
    signBtn.addEventListener('click', event => {
        signUp()
    })
</script>

<!-- method -->
<script>
    function signUp() {
        console.log('username= ', username.value)
        console.log('password=', password.value)

        let data = {
            username: username.value,
            password: password.value
        }

        $.ajax({
            type: 'post',
            url: '/api/sign-up',
            data: JSON.stringify(data),
            contentType: 'application/json; charset=utf-8',
            success: function (response) {
                console.log(response)
                location.href = '/sign-in';
            },
            error: function (response) {
                console.log(response)
            }
        })
    }
</script>

</body>
</html>